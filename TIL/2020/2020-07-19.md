# TIL 2020-07-19

오늘 배운 것 & 한 것

--------------------------

## 어제 한 일

## 할 일
**중요**
- [x] 구글/애플 api 상세 분석
- [x] 기능 분석, 설계문서 작성

- [x] 배스천 호스트 구조 정리하기
- [ ] backup the structure using cloudformer and cloudformation
- [ ] make password protected s3 bucket and manage keys in there

- [ ] uml 시나리오 작성
- [ ] 예외사례 생각하기 (spoof 등)
- [ ] feature list 구체화
- [ ] 블로그 다시 시작하기
- [ ] 방 알아보기
- [ ] aws configure script 작성

## 매일
- [x] 회사 알아보기
  테슬라
  구글 - foobar

- [x] 문구 모으기, 책읽기
  정처기
  

## 배운 것 & 한것 

### 생각

생각보다 정보처리기사 책의 개발 방법론(애자일 스크럼 등)이 실용적인 느낌이 있다. 그런데 과연 이 상태에서 제대로 적용이 가능할까. 매일 뭐 했다고 얘기할 필요가 있을 거 같다.

그리고, 클라우드 구조를 백업하는게 우선이 아니라, 먼저 기능 분석과 설계문서 작성을 좀 더 제대로 할 필요가 있을 거 같다. 작업 절차는 먼저 예시 파일들을 보고 필요해 보이는 파일들을 작성하는 식으로 하면 될 것이다. 

그리고 또 중요한 것은, 다음주에는 이 파일들을 작성해보았음을 발표해야 한다.

### 기능 분석, 설계문서 작성

현재까지 대충 작성한 것은 요구사항 정의서와 사용자 유즈케이스 뿐이다. 이를 기반으로 프로세스 정의서와 신업무흐름도가 나와야 하는데, 모니터가 한개 뿐이라 어렵다. 또한, 저번에 얘기한 서버 스펙 (예산) 관련 문서도 작성해야 하는데.. 그 양식이 어디에 있더라?? 앞으로 멘토링 관련 자료나 문서들은 반드시 usb에 전부 저장하도록 하자. 

왜 이렇게 문서를 작성하기가 애매하고 어렵지?? 

현재 문제점들:
- 업무 분해도 또는 프로세스 정의서가 작성되지 않아 각 스프린트에서 해야 할 일을 대충 그때 그때 생각하고 있다. 목표와 진척의 확인이 어렵다.
- 작업 내용 공유를 매일 하지 않아 다음에 뭐가 필요한지 바로 알기가 어렵다.
- 담당 역할이 명확하지 않아 진척에 대한 예측이 어렵다.
- (구글 api를 사용하게 될 가능성이 있어) 업무 분해도나 프로세스 정의서를 작성하기 어렵다.
- 깃랩에 정리하기로 했는데도 안되고 있다..

대안:
- 최대한 빨리 구글 api 및 저장소 분석을 통해 어느 쪽으로 할 것인지 결정한다. (아마도 구글 api를 결국 쓰는 쪽으로 될 듯하다...)
- 분석 문서를 작성하여 형상을 결정하고 설계하면서 개발을 진행한다.
 
- 깃랩에 매일 작업 상황을 정리한다. 어떤 식으로??
- 



#### 의문점

1. 
예시를 생각해보자. 추적 체인 관리 기능에서 스캔 기록 동기화 기능은, 해당 유저와 서버의 스캔 기록을 대조한 후 서버의 스캔 기록 또는 유저의 스캔 기록을 업데이트하는 기능이다. 이 기능을 구현하기 위해서는 서버와 클라이언트가 어떻게 통신하고 데이터 형식이 어떻게 되며 흐름과 순서는 어떻게 되는지에 대한 정보가 필요하다.

데이터 형식에 대해서는 설계 단계에서 데이터 설계 (ERD 등)를 하면서 명확해질 수 있으나, 문제는 그렇다면 설계를 하면서 개발을 들어가게 되면 다른 기능이되 같은 데이터를 참조하는 경우 문제가 생길 수 있지 않느냐는 것이다.

2. 기능 차트에서 하위 레벨 기능을 작성하면, 그 기능들이 전부 요구사항 정의서에도 들어가야 하는가??




### 구글/애플 api 상세 분석

현재 문제점: 
1. GCP만 지원한다.
-> aws로 직접 배포하고 그렇게 할 수 있도록 하는 것을 목표로
2. 산출물을 작성하기 애매해진다.
-> 기존 시스템 분석 + 기능추가에 적합한 시나리오와 문서 양식이 있을까?
3. 공인된 기관이어야 한다.
https://support.google.com/googleplay/android-developer/contact/expo_notif_api?hl=en

이게 이렇게 되어 있다면, 아마도 안드로이드 시스템 api로 contact tracing이 제공되며, 그 api를 호출하려면 위의 신청서를 써서 공인된 기관만이 만들 수 있다는 것을 의미하는 것으로 보인다.

그러면 아마 다시 자발적+직접 개발 방향으로 갈거 같다.
뭐가 되었든 기본적인 회원 가입, 회원 관리 등의 기능은 필요한 것 아닌가.

직접 개발 방향으로 가면 역시 아무런 역할도 하지 못할 서비스겠지만 산출물은 작성할 수 있다.

### backup the structure using cloudformer and cloudformation

일단 cloudformer를 사용하기 힘든 상태이므로 로그로라도 대충 어떻게 셋업하는지에 대해 정리해 놓아야겠다.

0. nat gateway용 Elastic IP를 하나 생성한다.
1. aws vpc 대시보드에서 VPC 마법사를 시작하여 2-tier 서비스를 선택하여 vpc를 생성한다. 
2. 해당 vpc에 private 및 public 서브넷을 생성한다.
CIDR 예시:
10.0.1.0/24
10.0.0.0/24
3. 라우팅 테이블에서 기본 테이블은 0.0.0.0/0이 nat 게이트웨이를 가리키도록 한다.
4. 기본이 아닌 테이블은 0.0.0.0/0이 igw 인터넷 게이트웨이를 가리키도록 한다.
5. 위에서 만든 각각의 subnet에서 ec2 인스턴스를 하나씩 만든다. 그리고 배스천 호스트 인스턴스를 public 서브넷에 만든다.
6. 이제 보안 그룹 설정을 한다. private 인스턴스는 배스천 호스트의 보안 그룹을 인바운드 22포트 허용 소스로 한다. 그 외 db 업데이트 등에 필요한 포트는 아웃바운드에서만 열도록 한다.
7. public 인스턴스는 22포트 및 웹 페이지 포트 등 서비스 포트들을 열도록 한다.
8. 퍼블릭 서버의 ip 할당을 elasticIp에서 할수있나?
9. 배스천 호스트에서 프라이빗 IP로 private 인스턴스에 접속 가능한지 확인한다. (예: 10.0.0.127)




### make password protected s3 bucket and manage keys in there



## tags
- \#TIL, \#blog, \#vscode, \#prj

--------------------------


 