# TIL 2020-07-09

오늘 배운 것 & 한 것

--------------------------

## 한 일

- [x] 개발 환경 설정 : aws ec2 셋업 스크립트 작성
- [x] 서버 통신구조 구현:
  - [x] express와 dynamodb 연결

## 할 일

**중요**
- [ ] 구글/애플 api 분석

- [ ] 서버 통신구조 구현 : dns 연결
- [ ] 재시작 구조 구현

- [ ] uml 시나리오 작성
- [ ] 예외사례 생각하기 (spoof 등)
- [ ] feature list 구체화
- [ ] 블로그 다시 시작하기
- [ ] 방 알아보기
- [ ] aws configure script 작성

## 매일
- [ ] 회사 알아보기
- [ ] 문구 모으기, 책읽기


## 배운 것 & 한것 

구글 api 분석

셋업 스크립트를 도커파일 기반으로 바꾸는게 나을 지 고려.
셋업 스크립트에 시크릿 키를 넣으면 공개 업로드를 할 수가 없다. 어떤 식으로 해야 간단할까? 그냥 매 번 복붙 해야하나.

aws 시크릿 키는 해당 볼륨의 `~/.aws/credentials` 파일에 toml 형식으로 넣으면 된다. 여러 볼륨을 docker에 연결시킬 수 있으니 remote와 docker간 시크릿 통신은 문제가 없다. 문제는 현재 셋업 스크립트에 민감정보가 있다.

### node js express json 사용

`app.use(express.json())`을 써서 등록이 되었으면 body가 json일 경우 이미 parse된 object가 넘어오므로 따로 parse할 필요가 없다.

```js
...
  .get(function (req, res, next) {
    var obj=req.body.what
    console.log(obj)
...
```
위와 같이 바로 쓰면 된다.

### dynamodb nodejs sdk 사용방식

다음과 같이 지정한다. 각 key들에 value를 지정하는데, 그냥 지정하는게 아니라 `{'type':'value'}`형식으로 지정해야 한다. 문자열이면 `{'S': 'val'}` 이런 식이다.

```js
...

// Create the DynamoDB service object
var ddb = new AWS.DynamoDB({apiVersion: '2012-08-10'});

var params = {
  TableName: 'table1',
  Item: {
    'key1' : {'S':'val1'},
    'key2' : {'S':'val2'},
    'key3' : {'N':'003264'},
  }
};
```

그외 CRUD 하는 부분은 (여기)[https://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/dynamodb-example-table-read-write.html]에 잘 나와있다.

credential 연결은 sdk에서 `~/.aws/credentials`파일을 찾아서 사용하도록 기본적으로 되어 있다.

### docker commit


### 변재영 멘토님 멘토링

- 요구사항 추적표, 
요구사항과 기능차트를 매핑 -> 요구사항에서 빠진 기능이 있는지 등을 찾을 수 있다.

- 유즈케이스 (유저스토리로 대체 가능)

- 서비스 구성도 (사실 업무 흐름도):

- UI/UX 정의서
ui 들어갈 모든 내용이 표시, 어떻게 연결되는지, 몇개나 띄우는지 등

+ 메뉴 구성도

- 화면 설계서 (하드웨어 구성)

- 엔티티관계도 ERD (필스)


(프로세스 모델링 시험.. 존재: 업무 시나리오)


개발도구 경험도 중요 (상용 ui툴 등.. )

PO의 분석을 토대로 개발자가 분석하여 설계하고 구현하게 된다.

업무기능분해도:
역할자가 중요. 한명같아도 무조건 써야한다. 프로세스를 레벨화하기도.

통합업무흐름도:
점선:사람의 업무영역
실선:시스템영역

업무흐름도,업무기능분해도가 MSA마이크로서비스아키텍쳐때문에 엄청 중요해짐

설계부터 업무분장 - aws 구성별
db는 엔티티관계

0.1부터시작,
고객통과하면 1.0

현업요구사항정의서 실무에서는 출처가 매우 중요하다(어떤회의에서인지? 회의록 등과 연결. 인터뷰에서 나온건지, 멘토링에서인지 등)



#### 설계 (여기부텅0

기능흐름도
- flowchart,
- sequence diagram

- 알고리즘 명세서
-> 알고리즘 바꿀때마다 버전으로 관리

- 알고리즘 상세 설명서

- 데이터 수집처리 정의서 -> 데이터수집 아키텍쳐(프로토콜 등)가 가장 중요.

- 프로그램 목록(그 안에서 분배)
따라서 매우 중요

- 테이블 정의서 erd
보통 요즘 자동으로 추출함.


- (참조) 개발 환경 및 설정:
소프 아키는 전부 구축,시도하여 팀원에게 알려줌

- 프로젝트 관리


##### 데이터설계

ERD물리, 데이터코드정의서, 테이블목록_문서양식, 테이블정의서_문서양식이 한세트

##### 프로그램설계

기능과 거의 1:1

배치/스케줄링등 프로그램이

배포 위치?? WAS ? WEB? 등 어느쪽인지.

##### 테스트설계:

단위,통합

TDD를 하기를 강력하게 추천.


(실제 통합테스트는 개발 끝나갈때함)

(테스트를 어떻게 진행할지.)

산출물을 실무 레벨에서 쓰고 보고 리뷰하고 왜 필요한지, 작성한 산출물을 설명하면서 얻는게 많을 것이다.

리뷰일정을 만들어야 그때까지 만들게 된다.

입사하면 OJT한 후, 팀나눠서 프로젝트를 하게 된다.

업무흐름도짜고 설명까지해->대단

ui 본수만큼으로 디자인 외주비가 든다.
유지보수 이런건 따로임.
한장에 얼마인가 -> 기획이 구체적이면 싸다.
장당 5~15만원



### 그외

- (참조) 개발 환경 및 설정:
소프 아키는 전부 구축,시도하여 팀원에게 알려줌

- 프로젝트 관리


업무흐름도,업무기능분해도가 MSA마이크로서비스아키텍쳐때문에 엄청 중요해짐


현업요구사항정의서 실무에서는 출처가 매우 중요하다(어떤회의에서인지? 회의록 등과 연결. 인터뷰에서 나온건지, 멘토링에서인지 등)

현업에서 보통 분석은 1명이 함.
PO의 분석을 토대로 개발자가 설계하고 구현하게 된다.

0.1부터시작,
고객통과하면 1.0


##### 데이터설계

ERD(물리설계), 데이터코드정의서, 테이블목록, 테이블정의서가 한세트



(실제 통합테스트는 개발 끝나갈때함)

(테스트를 어떻게 진행할지.)

산출물을 실무 레벨에서 쓰고 보고 리뷰하고 왜 필요한지, 작성한 산출물을 설명하면서 얻는게 많을 것이다.

리뷰일정을 만들어야 그때까지 만들게 된다.

입사하면 OJT한 후, 팀나눠서 프로젝트를 하게 된다.

업무흐름도짜고 설명까지해->대단

ui 본수만큼으로 디자인 외주비가 든다.
유지보수 이런건 따로임.
한장에 얼마인가 -> 기획이 구체적이면 싸다.
장당 5~15만원



## tags
- \#TIL, \#blog, \#vscode, \#prj

--------------------------


 