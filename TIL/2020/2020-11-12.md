# TIL 2020-11-12

--------------------------

## 할 일

- [x] msa - kafka
- [x] 할일 정리
- [x] 서류 작업
- [ ] admin page
- [ ] 차수를 정확히 어떻게 처리할지 생각하기.
- [ ] 이전 접촉자(의심자)가 아닌 것으로 판명날 경우의 처리가 필요
- [ ] 차수 수정
- [ ] 스캔 데이터 정제하여 저장
- [ ] 깃랩 주석 등 코드 정리, 황형 브랜치 합치기

### msa - kafka

kafka, zookeeper 세대 이상으로 클러스터링(운영환경)


kafka consuming에서 실패시 보상 트랜잭션을 할 지, 아니면 재실행을 할 지는 선택에 달림.

#### API Composition

여러 번의 호출을 할 필요 없이 묶어놓는것 (req 횟수 줄이기, 백엔드/프론트엔드 분리 장점)

만약 병렬로 composite할 때에는, Hystrix fallback 등에서 사용하게 되므로.
스레드 안에서 다시 스레드를 만드는 구조가 될 경우 충돌이 날 수도 있다.

멘토님 설명: 무조건 묶는게 좋은건 아닐수도 있다.
왜냐하면, 그 중 하나가 느릴 경우 전부 느려지고, 클라이언트에서 큰 데이터가 한 번에 들어가므로 무거워질 수 있다.


#### CQRS

통계를 위해 조인해서 보여주는 것.


#### kafka

파티션 안에서의 메시지 순서는 보장이 된다.

그러나 파티션간 순서는 상관없이 동작




### 할일 정리


swagger routes 

~ 11.12 13시까지 기획서 및 ppt 문서 작성
~ 11.12 오후 차수 오류 수정하기
~ 11.12 오후 코드 정리 및 전체 합치기
~ 11.14 스캔 데이터 정제하여 저장 및 접촉시간 문제 해결
~ 11.18 admin page
~ 11.19 시연 설계 및 연습


시나리오 잡히면 변재영 멘토님께 공유해드리기
황형 쿠버네티스 환경 준비


## tags
- \#TIL, \#blog, \#prj, \#swm, \#msa, \#kafka

--------------------------