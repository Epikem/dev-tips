# log 2022-07-30

--------------------------

- [blog](#blog)
- [study](#study)
  - [clean architecture in rx](#clean-architecture-in-rx)
- [tags](#tags)

## blog

## study

### clean architecture in rx

생각을 해보자.
interactor와 controller에서 이미 검증을 하는데, data access에서 또 입력 검증을 할 필요가 있나?
입력 검증보다는 수행을 하다가 발생하는 에러만 던져주면 될 것이다.

다만, 여기서 수행하는건 입력 검증이 아니라 충돌 검증 등인데,
여튼 rx 책을 보니 Try라는 오퍼레이터?를 만들어서 하는 방법도 나온다.
근데 한 방법일 뿐이란 생각이 든다.

그리고, clean architecture의 소리치는 아키텍처 내용에 따르면, 아키텍처만 봐도 어떤 애플리케이션인지 알 수 있어야 한다는데,
현재의 책의 구조대로면, 의존 관계에 따라 컨트롤러를 나눌 것이고..
궁금한 것은, 그 컨트롤러들도 서로 분리되어야 하는가? 서로 참조가 있다면? 같은 계층이니 바로 가져와서 써야 할 것이므로 같은 컴포넌트이고, 따라서 분리되는 것이 아니다.
그렇다면 결국 아키텍처는 컴포넌트별로 interactors, entities, data access interfaces 등으로 나뉠 것이다.
근데 그렇게 되면 그게 소리치는 아키텍처 아닌가? '클린 아키텍처 책의 방식대로 된 아키텍처다'라고 외칠 뿐 아닌가?

그것보다 실질적이고 중요한 것은 로직을 주로 어디에 어떻게 두어야 하는가다.
사용자를 추가하려는데, 아이디 충돌이 나지 않아야 한다는 것은, 비즈니스 로직의 문제인가, 저장 계층의 문제인가?
내 생각에, 실질적으론 사용자를 id에 따라 검색하는 것이 비즈니스 요구사항은 아닐 것 같다. 다만 소프트웨어적 편리함 등의 문제로 id를 사용할 뿐.
여튼 사용자의 id 기반 조회/변경/삭제 등이 비즈니스 로직이라 친다면 interactor에서 검사를 해야 할 것이고, 데이터 저장 계층만의 문제라면 저장 계층에서 해야 할 것 같다.
그런데, 비즈니스 로직에서 검사했다면, 더 이상 아무런 검사 없이 data access 구현체에서 저장을 하도록 해도 괜찮을까?




가상 스케줄러로 대기 없이 검사하는것도 흥미롭다.




## tags
- blog
- study
- clean-architecture
- rxjs
- typescript

--------------------------


