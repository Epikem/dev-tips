# log 2022-01-04

--------------------------

- [blog](#blog)
- [job](#job)
  - [테스트 계정 셋업 2](#테스트-계정-셋업-2)
- [tags](#tags)

## blog

2021 포스트 옮김

## job

### 테스트 계정 셋업 2

에러넘버로 트래킹중.
cloudwatch 로그에서 확인하니 중간까지는 절차가 잘 작동하다가, 어디선가 에러가 발생한다. 에러코드 던지는 부분은 확실히 알겠는데, 왜 이 에러코드가 발생하는지 확인하기 위해 로그 추가 및 테스트 필요.

왜 gradle로 람다별 프로젝트를 만들거나, 셸 스크립트로 작성하지 않고 현재와 같은 방식으로 했을까 궁금하다.

로그 찍어보니 내가 유령이라고 나온다. kcb 이넘들..

근데 대충 예상은 가지만 사실 답이 없다. kcb측에 내가 업데이트해야 할 부분일 가능성이 높다.

로그 추가 후 페이지에서 요청할 때의 에러와, 람다 직접 호출로 나는 에러가 다르다. 왜 다른거지??

```json
OKCERT RESPONSE 
{
    "RSLT_MSG": "해당 이름 미존재",
    "RSLT_CD": "B002",
    "CP_CD": "V33910000000",
    "TX_SEQ_NO": "220104012444KC663875",
    "RN_SEQNO": ""
}
```

```json
{
  "response": "{\"RSLT_MSG\":\"기타오류\",\"RSLT_CD\":\"B099\",\"CP_CD\":\"V33910000000\",\"TX_SEQ_NO\":\"220104015923KC185533\"}"
}
```

알고보니, 위의 요청 (내가 로그 찍은것) 은 람다 내부에서 OKCERT보낼때 방식이고, 람다 자체는 아래와 같은 req 형식만 맞추면 되는 것이었고,

```json
{
    "ip": "127.0.0.1",
    "name": "이x우",
    "ssn": "..."
}
```

결국 정보 업데이트가 안되어서인게 확인되었다.



## tags
- blog
- job
- aws

--------------------------

