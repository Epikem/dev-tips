# TIL 2020-10-22

--------------------------

## 할 일
- [x] 행정서류 작성
- [x] N:N 재설계 고려

### 행정서류 작성 - 캡스톤

사진 첨부 및 상세 작업기록 추가.
사실 사진만 좀 넣어도 세장 거뜬히 넘을 것이다.

어휴.. 다시는 한컴스페이스 쓰지 말자

### N:N 재설계 고려

저번 피드백대로 재설계를 해야 할까? 다시 한번 사용 시나리오와 쿼리의 빈도에 대해 생각해보아야겠다. 그리고, 특강에서 쓰기와 읽기가 분리되어야 하며, 쓰기가 많은지, 읽기가 많은지에 따라 테이블 설계가 완전히 달라진다고 한다. 현재 사용 방식은 다음과 같다.

1. 현재 확진자 수 가져오기
    사용자 테이블에서 읽기
2. 로그인
    사용자 테이블에 쓰기 기록.
3. 스캔하기
    스캔 테이블에 쓰기 기록
4. 차수 추적하기
    스캔 테이블에 쓰기 기록
5. 실시간 접촉자 알림
    스캔 테이블에서 읽기

현재 상황을 보면, 1-2 쿼리와, 3,4,5 쿼리가 동시처리될 수 없는 상태이다.

웹 서비스의 경우 데이터 실시간 정합성이 중요하지 않으므로 보통 락 없이 쓰기(빠르고 부정확)를 쓴다는데, 이 서비스의 경우는 어떤가?

이 서비스의 경우, 현재 확진자 수 가져오기라면 부정확해도 괜찮지만, 실시간 접촉자 알림이 느리게 작동한다면 안 넣느니만 못할 것이다. 그래서 내 생각에는 차수 추적 및 접촉 알림을 일 1회와 같이 느리게 하는게 어떤가 싶다.

그런데 내 생각에, 이렇게 최적화 하는것은 지금 하기엔 시간이 꽤 걸릴 듯하다. 일단은 필드 추가만으로 바꾸는 게 어떨까 싶다.

그렇다고 해도, jmeter를 이용한 테스트 추가 자체는 필요해 보인다.

그러나 변수 처리때문에 현재는 어려운 상태.

그렇다면 일단 이 상태로 놔두고 더 필요한 기능들이 없는지 생각해보자

가능한 다음 스텝들:

- proxySQL 적용
- 회복 api 추가
- 관리 페이지 추가


## tags
- \#TIL, \#blog, \#prj, \#swm, \#capstone

--------------------------