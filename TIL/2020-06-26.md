# TIL 2020-06-26

오늘 배운 것 & 한 것

--------------------------

## 한 일

- 역할별 기능 리스트 정리
- 스크립트 작성
- 엘리스 강의 진행

## 할 일

- [x] 스크립트 작성
- [x] 맥북 개발환경 세팅
- [x] 엘리스강의 진행
- [x] ~버스표 예약 - 포항->안산~


[1] 인사
안녕하세요. 저희는 이번 소프트웨어 마에스트로 11기에 참여하게 된 나이스 팀입니다.

[2] 팀 소개
저희 서비스를 소개하기에 앞서 먼저 팀 멤버를 소개하겠습니다.

왼쪽은 팀장 남궁황씨입니다. PM으로서 추진 일정을 관리하고, 모바일 애플리케이션 제작 및 REST API 개발을 맡았습니다.
가운데는 김태양씨입니다. 서버 개발자로서 데이터 처리 알고리즘을 개발하고 AWS 아키텍쳐 설계 및 구축, 데이터베이스 모델링을 맡았습니다.
세번째는 이현우입니다. 관리자 웹 페이지 개발, REST API 서버 개발 및 CI/CD 파이프라인 구축 및 테스트를 할 것입니다.


[3] 목차

다음과 같은 순서로 발표를 하도록 하겠습니다. 먼저 서비스를 개발하기로 한 배경, 즉 목적과 필요성을 설명하고, 프로젝트의 기능을 소개할 것입니다. 그 다음 시장 동향 조사 결과를 설명하고 마지막으로 서비스의 기대효과 및 활용 방안을 설명할 것입니다.


[4] 목적 및 필요성 - 깜깜이, 

요즘 코로나 확진자 증가수가 다시 조금씩 늘어나는 추세인데요, 거의 잡힐 듯 하다가도 조금만 풀어지면 다시 늘어나는 것을 반복하고 있어 많은 사람들에게 불편함을 안겨주고 있습니다. 위 그림과 같이 코로나 사망자 4명중 1명은 감염경로를 알 수 없는 '깜깜이'라고 합니다. 코로나19의 무증상 잠복기와 같은 특성으로 인해 더더욱 확진자와 접족차의 감염 경로를 파악하기 어려운 부분도 있습니다. 

[5] 목적 및 필요성 - 신규 확진, 격리현황 그래프

또한 확진자의 사생활 노출에 대한 우려로 역학조사에서 동선 공개를 꺼져하는 경우도 있다보니 위 그래프와 같이 신천지나 서울 이태원 클럽같은 장소에서 대규모 확진자가 발생하기도 했습니다.

[6] 목적 및 필요성 - 종합 -> 해결(어떤 기능)

이렇듯 감염경로가 불명확하거나, 사생활 노출 우려에 따른 역학 조사 비협조적이거나, 시도때도 없이 뜨는 재난안전문자로 인해 오히려 안전불감증이 유발되는 등 여러 요소로 인해 현재의 방역 시스템에는 한계가 있다는 것을 알아냈습니다. 


따라서 저희는 이러한 문제를 해결할 수 있도록 다음과 같은 기능을 제공하는 서비스를 만들기로 하였습니다.
저희 서비스는 지도 기반의 코로나맵 등과 달리 접촉자 전원을 스캔하여 감염 경로를 정확하게 확인할 수 있습니다.

그리고 gps정보와 같은 민감 개인정보를 사용하지 않도록 하여 자신이 확진자가 된다 하더라도 동선이 노출되지 않으므로 안심하고 사용할 수 있습니다.

마지막으로 재난문자와 달리 확진자와 접촉한 경우에만 핵심 알림을 보내므로 사용자를 귀찮게 하지 않으며, 사용자에게 경각심을 일깨우게 됩니다.

[7] 프로젝트 소개 - 

이제 저희 밀접 접촉자 알림이를 소개하겠습니다. 

밀접 접촉자 알림이는 민감 정보를 사용하지 않고도 확진자와의 접촉 여부를 정확하게 알 수 있는 어플리케이션으로, 보시는 그림과 같이 확진자와 접촉이 있었을 경우에만 사용자에게 알람을 보여주는 서비스를 제공합니다. 사용자는 자신의 동선과 같은 정보를 공개하지 않고도 이 서비스를 통해 자신이 확진자와 접촉했는지를 알 수 있습니다.

[8] 핵심 기능 - 

이제 이러한 서비스를 어떻게 구현했는지 알려드리겠습니다. 먼저 각 사용자는 BLE라 불리우는 블루투스 저전력 기술을 사용하여 서로 접촉 여부를 스캔하게 되고, 서버는 나중에 확진자가 발생하면 이러한 기록을 역추적하여 접촉자들에게 경고 알람을 보내주게 됩니다. 이 때 접촉자들은 자신이 확진자와 접촉한 시간과 위치, 얼마동안 접촉했는지 등을 한 눈에 알 수 있습니다.

이제 이러한 핵심 기능들을 어떻게 구현할 것인지 상세하게 알려드리겠습니다.

[9] 핵심 기능 - ble scan

먼저 블루투스 저전력 기술을 활용한 접촉 기록 구현입니다.
이는 앞서 말씀드린 BLE라는 기술로 구현됩니다. BLE는 블루투스 로우 에너지의 약자로서, 기존의 블루투스보다 전력 소비량을 줄인 저전력 무선통신 기술입니다.

저희의 핵심 기능인 접촉자 추적은 ble를 활용하여 주변 접촉자들의 맥 주소를 스캔하여 구현됩니다. BLE를 사용한 이유는 접촉자들을 오랜 시간, 자주 스캔하여 기록해야 하기 때문입니다. BLE 기존의 블루투스보다 전력 소비량이 낮아 접촉 스캔 기능을 구현하는 데 적합한 기술입니다.

[10] 핵심 기능 - ble scan - ble 전력 소모량 테스트

먼저 여러 최신 핸드폰 기종에 대해 BLE의 전력 소모량을 테스트를해본 결과 다음과 같이 평균 2퍼센트의 전력 소모량을 보였습니다.


[11] 핵심 기능 - ble scan - 스캔 거리

다음으로 접촉자 추적을 위한 스캔 거리를 설정하였습니다. 조사에 따르면 사람의 재채기에서 나온 비말은 공기중에서 약 10미터까지 전파가 가능하다고 합니다. BLE 문서를 조사한 결과 BLE 스캔 범위도 약 10미터에 이른다고 나와있어 서비스에 적용하기 적합하다고 판단했습니다.

[12] 핵심 기능 - 알림 서비스

다음은 알림 서비스입니다. 사용자들은 접촉했던 사람이 나중에 확진이 되면 경고 알림을 받게 됩니다. 이는 앞서 설명한 BLE 스캔으로 얻은 데이터를 API 서버를 통해 클라우드에 저장해두고, 확진자 발생 시 접촉한 사용자를 찾아내는 역추적 알고리즘을 통해 구현됩니다.

이로써 사용자에게 필요한 핵심 알림만을 보내어 자가격리 여부 등을 판단하는데 도움을 줄 수 있습니다.

[13] 핵심 기능 - 접촉 위치

사용자에게 접촉 위치를 알려주는 기능은 BLE 스캔을 할 때 사용자 자신의 위치 좌표를 앱 내에 저장해두고, 나중에 확진자가 발생하면 접촉시간의 좌표를 확인하여 지도에 띄워주게 됩니다. 지도는 구글이나 네이버 맵을 이용하여 구현할 것입니다.

이 기능을 통해 사용자는 확진자와의 접촉 위치를 파악할 수 있게 됩니다.

[14] 부가 기능 - 

이제 저희가 추가할 계획인 부가 기능들을 소개하겠습니다.

- 선별진료소 안내
가까운 선별진료소를 소개하여 진단을 받을 수 있도록 하고,

- 자가 격리 기간 안내
접촉자 중에 확진자가 발생할 경우 예상 자가격리 기간을 알려줍니다.

- 보건당국/지자체 연계 api 제공
그리고 보건당국과의 연계 api를 제공하여 더욱 

[15] 시스템 구성도

다음으로 시스템 구성도를 설명하겠습니다.
접촉 스캔 및 기록은 BLE가 스캔한 기록을 아마존 MQTT와 IoT를 통해 EC2 서버에 보내지고, 서버는 이를 처리하여 DynamoDb 데이터베이스에 저장하게 됩니다. 그리고 모바일 어플리케이션은 rest api를 통해 ec2 api 서버와 통신하게 됩니다. 선별진료소 안내 등 추가적인 기능은 지자체나 당국의 open api를 사용할 것입니다.

[16] 관련 APP 현황

다음으로 시중에 이미 나와있는 코로나 관련 앱들에 대해 분석하였습니다. 자가격리자 안전보호 앱의 경우 건강상태 자가진단, 생활수칙 안내, 비상연락망 조회 등의 기능을 제공하고, 확진자에 대한 정보를 제공하지는 않았습니다. 경남 코로나19어플의 경우 지도에 기반한 확진자 동선 및 공적마스크 재고를 알려주지만 상세한 동선을 알 수는 없었습니다. 코로나19 지침검색 앱은 보건소 등 기관에서 코로나19 관련하여 사용할 수 있는 대응 지침을 공개하고 있습니다.

[17] 독창성 및 차별성 - 사생활 노출 걱정 감소


앞선 서비스와 비교했을때, 저희 서비스는 민감 개인정보를 사용하지 않아 사생활 노출에 대한 걱정이 적습니다.

[18] 독창성 및 차별성 - 사생활 노출 걱정 감소 2 (구성)

이는 사용자의 GPS 좌표와 같은 민감 개인정보는 사용자의 휴대폰에만 저장하고, 사생활이 노출될 염려가 없는 mac 주소와 같은 정보만 사용하여 클라우드와 동기화하는데 사용하기 때문입니다. 따라서 사용자는 이 어플을 사용하면서 자신의 동선이 노출될 걱정을 할 필요가 없습니다.

[19] 기대 효과 

이 서비스를 사람들이 사용함으로써 발생할 것으로 기대되는 효과들은 다음과 같습니다.

- 사회적
먼저 사회적으로는 접촉자 기록이 있어 확진될 경우 당국이 동선을 조사할 필요가 없어지므로 사생활 노출 우려가 감소하고, 근거리 통신을 사용하여 실내,외 다수의 접촉자 수집이 가능하며 자가격리 기간을 직관적으로 확인 가능합니다.

- 비즈니스적
으로는 각종 기관에서 확진자의 통계 접촉기록 등을 관리할 수 있고, 이를 통한 효율적인 지역 방역을 통해 지역사회 경제 활성화를 기대할 수 있으며, 공무원의 업무를 경감시켜줄 수 있습니다.

- 개발자적
기술을 통해 사회문제를 해결하는 경험을 가질 수 있고, 애자일 기반 실무 협업 경험 및 AWS 클라우드 기반 인프라 및 서버 구축을 통해 실무에 가까운 경험 통해 실력을 향상시킬 수 있을 것으로 기대됩니다.

[20] - 활용 방안

이제 서비스의 향후 활용 방안에 대해 설명하겠습니다.
먼저 각 지역별로 좀더 상세한 맞춤형 정보를 제공하도록 하여 국가기반 사업으로 확장시킬 수 있습니다. 그리고 이 서비스가 바이러스 방역에 효과적임이 입증되면 코로나19가 종식되더라도 잠복기 등 설정을 수정하여 향후 다른 유행병에도 적용시킬 수 있습니다. 또한 웨어러블 기기 등에 적용하여 실시간으로 접촉 유무를 알려주는 등 사업을 확장시킬 수도 있을 것입니다.

[21] - 추진 일정

추진 일정은 다음과 같습니다. 
먼저 6월중으로 기획서 작성과 분석을 끝내고, 상세 설계 작업에 들어갈 것입니다. 이 때 각 스프린트별로 단계별로 기능들을 구현할 수 있도록 나눌 것입니다. 설계가 잡히면 애자일 개발 방법을 따라 개발을 시작할 것이며, 스프린트 1에서 MVP, 즉 최소 기능 제품을 완성하고, 스프린트 2에 기능들을 수정하면서 대외 연계 api와 같은 추가 기능을 개발할 것입니다. 스프린트 3에서는 마무리 개발과 테스트를 진행할 것입니다.
이후 배포와 통합 테스트를 거쳐 프로젝트를 마무리할 계획입니다.

[22] - qna



## tags
- \#TIL, \#blog, \#vscode, \#swm

--------------------------


 